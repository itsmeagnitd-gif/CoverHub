<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessories - Coverly</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <style>
        /* Reuse styles from cover.html */
        .page-header {
            text-align: center;
            padding: 40px 0 20px;
        }
        
        .page-header h1 {
            font-size: 2.5rem;
            color: var(--dark);
            margin-bottom: 10px;
        }
        
        .page-header p {
            color: var(--gray);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }
        
        .category-card {
            background: white;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            text-decoration: none;
            color: inherit;
        }
        
        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .category-image {
            height: 150px;
            overflow: hidden;
        }
        
        .category-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .category-card:hover .category-image img {
            transform: scale(1.05);
        }
        
        .category-info {
            padding: 20px;
        }
        
        .category-info h3 {
            margin-bottom: 10px;
            color: var(--dark);
        }
        
        .category-info p {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .accessory-count {
            background: var(--secondary);
            color: var(--dark);
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            margin-top: 10px;
            display: inline-block;
        }
        
        .sort-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }
        
        .results-count {
            color: var(--gray);
        }
        
        .stock-filter {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--gray);
        }
        
        .stock-filter input {
            width: 20px;
            height: 20px;
        }
        
        .price-display {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--gray);
        }
        
        .price-slider {
            flex: 1;
            max-width: 200px;
        }
        
        @media (max-width: 768px) {
            .sort-options {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .price-display {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <nav class="navbar">
                <a href="index.html" class="logo">
                    <div class="logo-icon">C</div>
                    <span>Coverly</span>
                </a>
                
                <div class="nav-links" id="navLinks">
                    <a href="index.html">Home</a>
                    <a href="cover.html">Covers</a>
                    <a href="accessories.html" class="active">Accessories</a>
                    <a href="cart.html">Cart</a>
                    <a href="wishlist.html">Wishlist</a>
                    <a href="admin.html" id="adminNavLink" style="display: none;">Admin</a>
                </div>
                
                <div class="nav-actions">
                    <div class="search-bar">
                        <input type="text" id="searchInput" placeholder="Search accessories...">
                        <button id="searchButton"><i class="fas fa-search"></i></button>
                    </div>
                    
                    <a href="wishlist.html" class="wishlist-icon" style="position: relative; margin-right: 15px; color: var(--dark); text-decoration: none;">
                        <i class="far fa-heart"></i>
                        <span class="wishlist-count" style="position: absolute; top: -8px; right: -8px; background-color: var(--primary); color: white; font-size: 0.8rem; width: 18px; height: 18px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold;">0</span>
                    </a>
                    
                    <a href="cart.html" class="cart-icon">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count">0</span>
                    </a>
                    
                    <a href="admin.html" class="admin-link" id="adminLink" style="display: none; margin-left: 15px; color: var(--accent);">
                        <i class="fas fa-cog"></i>
                    </a>
                    
                    <div class="mobile-toggle" id="mobileToggle">
                        <i class="fas fa-bars"></i>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- Page Header -->
    <section class="container page-header">
        <h1>Phone Accessories</h1>
        <p>Enhance your mobile experience with our premium accessories. From charging to audio, we have everything you need.</p>
    </section>

    <!-- Category Grid -->
    <section class="container">
        <div class="category-grid">
            <a href="#chargers" class="category-card" data-category="charger">
                <div class="category-image">
                    <img src="https://images.unsplash.com/photo-1588872657578-7efd1f1555ed?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Chargers">
                </div>
                <div class="category-info">
                    <h3>Chargers & Power</h3>
                    <p>Fast charging solutions for your devices</p>
                    <span class="accessory-count" id="chargerCount">0 products</span>
                </div>
            </a>
            
            <a href="#audio" class="category-card" data-category="audio">
                <div class="category-image">
                    <img src="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Audio">
                </div>
                <div class="category-info">
                    <h3>Audio & Earphones</h3>
                    <p>Crystal clear sound experience</p>
                    <span class="accessory-count" id="audioCount">0 products</span>
                </div>
            </a>
            
            <a href="#cables" class="category-card" data-category="cable">
                <div class="category-image">
                    <img src="https://images.unsplash.com/photo-1586816879360-004f5b0c51e5?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Cables">
                </div>
                <div class="category-info">
                    <h3>Cables & Adapters</h3>
                    <p>Connectivity solutions for all devices</p>
                    <span class="accessory-count" id="cableCount">0 products</span>
                </div>
            </a>
            
            <a href="#holders" class="category-card" data-category="holder">
                <div class="category-image">
                    <img src="https://images.unsplash.com/photo-1602030638410-6f5d870c5dba?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Holders">
                </div>
                <div class="category-info">
                    <h3>Holders & Stands</h3>
                    <p>Keep your phone secure and accessible</p>
                    <span class="accessory-count" id="holderCount">0 products</span>
                </div>
            </a>
        </div>
    </section>

    <!-- Sort Options -->
    <section class="container">
        <div class="sort-options">
            <div class="results-count">
                Showing <span id="resultsCount">0</span> accessories
            </div>
            
            <div style="display: flex; align-items: center; gap: 20px;">
                <div class="stock-filter">
                    <input type="checkbox" id="inStockOnly">
                    <label for="inStockOnly">In Stock Only</label>
                </div>
                
                <div class="price-display">
                    <span>Price: $<span id="priceValue">0-100</span></span>
                    <input type="range" min="0" max="100" value="100" class="price-slider" id="priceSlider">
                </div>
                
                <select id="sortSelect" style="padding: 8px 15px; border: 1px solid #ddd; border-radius: 6px;">
                    <option value="default">Sort by: Default</option>
                    <option value="price-low">Price: Low to High</option>
                    <option value="price-high">Price: High to Low</option>
                    <option value="rating">Highest Rated</option>
                    <option value="bestseller">Bestsellers</option>
                </select>
            </div>
        </div>
    </section>

    <!-- Accessories Grid -->
    <section class="container">
        <div class="products-grid" id="accessoriesGrid">
            <!-- Accessories will be loaded by JavaScript -->
        </div>
        
        <!-- No Results -->
        <div id="noResults" style="text-align: center; padding: 60px; display: none;">
            <h3>No accessories found</h3>
            <p>Try selecting a different category or adjusting your filters</p>
        </div>
    </section>

    <!-- Bundle Banner -->
    <section class="container" style="margin: 60px 0;">
        <div style="background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%); color: white; padding: 40px; border-radius: var(--radius); text-align: center;">
            <h2 style="font-size: 2rem; margin-bottom: 15px;">Complete Your Setup</h2>
            <p style="font-size: 1.1rem; max-width: 600px; margin: 0 auto 25px;">Get our Phone Protection Bundle and save 25% on a case, screen protector, and cleaning kit!</p>
            <button class="btn" style="background: white; color: var(--accent); font-weight: bold;" onclick="showBundleOffer()">
                View Bundle Offer
            </button>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-about">
                    <div class="footer-logo">Coverly<span>.</span></div>
                    <p>Coverly is your one-stop shop for premium phone accessories. We offer high-quality products that combine style, protection, and functionality for your mobile devices.</p>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-pinterest"></i></a>
                    </div>
                </div>
                
                <div class="footer-links">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="cover.html">Phone Covers</a></li>
                        <li><a href="accessories.html">Accessories</a></li>
                        <li><a href="cart.html">Shopping Cart</a></li>
                        <li><a href="wishlist.html">My Wishlist</a></li>
                    </ul>
                </div>
                
                <div class="footer-contact">
                    <h3>Contact Us</h3>
                    <p><i class="fas fa-map-marker-alt"></i> 123 Tech Street, San Francisco, CA</p>
                    <p><i class="fas fa-phone"></i> +1 (555) 123-4567</p>
                    <p><i class="fas fa-envelope"></i> support@coverly.com</p>
                    <p><i class="fas fa-clock"></i> Mon-Sat: 9AM - 8PM</p>
                </div>
                
                <div class="footer-info">
                    <h3>Customer Service</h3>
                    <ul>
                        <li><a href="#">Shipping Policy</a></li>
                        <li><a href="#">Return Policy</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms & Conditions</a></li>
                        <li><a href="#">FAQ</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2023 Coverly. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- WhatsApp Button -->
    <a href="https://wa.me/15551234567" class="whatsapp-btn" target="_blank">
        <i class="fab fa-whatsapp"></i>
    </a>

    <!-- Product Detail Modal -->
    <div class="modal-overlay" id="productModal">
        <div class="product-modal">
            <button class="close-modal" id="closeModal">&times;</button>
            <div class="modal-content" id="modalContent">
                <!-- Product details will be loaded by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Bundle Offer Modal -->
    <div class="modal-overlay" id="bundleModal">
        <div class="product-modal" style="max-width: 800px;">
            <button class="close-modal" id="closeBundle">&times;</button>
            <div id="bundleContent" style="padding: 30px;">
                <!-- Bundle content will be loaded here -->
            </div>
        </div>
    </div>

    <script src="product.js"></script>
    <script src="cart.js"></script>
    <script>
        // Mobile Navigation Toggle
        const mobileToggle = document.getElementById('mobileToggle');
        const navLinks = document.getElementById('navLinks');
        
        mobileToggle.addEventListener('click', () => {
            navLinks.classList.toggle('active');
        });
        
        // State management
        let currentCategory = 'all';
        let maxPrice = 100;
        let inStockOnly = false;
        let sortBy = 'default';
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Check admin login status
            const isAdminLoggedIn = localStorage.getItem('adminLoggedIn') === 'true';
            const adminLink = document.getElementById('adminLink');
            const adminNavLink = document.getElementById('adminNavLink');
            
            if (isAdminLoggedIn && adminLink && adminNavLink) {
                adminLink.style.display = 'block';
                adminNavLink.style.display = 'block';
            }
            
            // Load accessories
            loadAccessories();
            
            // Load cart and wishlist counts
            if (window.updateCartCount) window.updateCartCount();
            if (window.updateWishlistCount) window.updateWishlistCount();
            
            // Setup event listeners
            setupCategoryFilters();
            setupPriceSlider();
            setupStockFilter();
            setupSorting();
            setupSearch();
            
            // Update category counts
            updateCategoryCounts();
        });
        
        // Load accessories with filters
        function loadAccessories() {
            const accessoriesGrid = document.getElementById('accessoriesGrid');
            const noResults = document.getElementById('noResults');
            
            if (!accessoriesGrid) return;
            
            // Get filtered products
            let filteredProducts = window.products.filter(product => 
                product.category === 'accessory'
            );
            
            // Apply category filter
            if (currentCategory !== 'all') {
                filteredProducts = filteredProducts.filter(product => 
                    product.name.toLowerCase().includes(currentCategory) ||
                    (product.description && product.description.toLowerCase().includes(currentCategory))
                );
            }
            
            // Apply price filter
            filteredProducts = filteredProducts.filter(product => 
                product.price <= maxPrice
            );
            
            // Apply stock filter
            if (inStockOnly) {
                filteredProducts = filteredProducts.filter(product => 
                    product.stock > 0
                );
            }
            
            // Apply sorting
            if (window.sortProducts) {
                filteredProducts = window.sortProducts(filteredProducts, sortBy);
            }
            
            // Clear grid
            accessoriesGrid.innerHTML = '';
            
            if (filteredProducts.length === 0) {
                noResults.style.display = 'block';
                updateResultsCount(0);
                return;
            }
            
            noResults.style.display = 'none';
            
            // Display products
            filteredProducts.forEach(product => {
                const productCard = createAccessoryCard(product);
                accessoriesGrid.appendChild(productCard);
            });
            
            // Update results count
            updateResultsCount(filteredProducts.length);
        }
        
        // Create accessory card
        function createAccessoryCard(product) {
            const card = document.createElement('div');
            card.className = 'product-card';
            card.dataset.id = product.id;
            
            // Badge mapping
            const badgeTexts = {
                'new': 'NEW',
                'bestseller': 'BESTSELLER',
                'limited': 'LIMITED',
                'hot': 'HOT DEAL',
                'sale': 'SALE'
            };
            
            const badgeColors = {
                'new': '#4CAF50',
                'bestseller': '#FF9800',
                'limited': '#9C27B0',
                'hot': '#F44336',
                'sale': '#2196F3'
            };
            
            card.innerHTML = `
                ${product.discount ? `<div class="product-badge" style="background-color: ${badgeColors.sale || '#FFC8DD'}">${product.discount}% OFF</div>` : ''}
                ${product.badge && badgeTexts[product.badge] ? `
                    <div class="product-badge type-badge" style="background-color: ${badgeColors[product.badge] || '#A2D2FF'}; top: ${product.discount ? '45px' : '15px'}">
                        ${badgeTexts[product.badge]}
                    </div>
                ` : ''}
                
                ${product.stock < 10 ? `<div class="stock-badge">Only ${product.stock} left!</div>` : ''}
                ${product.stock === 0 ? `<div class="stock-badge" style="background: #f44336;">Out of Stock</div>` : ''}
                
                <div class="product-image">
                    <img src="${product.image}" alt="${product.name}" loading="lazy">
                    <div class="product-overlay">
                        <a href="#" class="view-details" data-id="${product.id}">View Details</a>
                        <button class="quick-view" data-id="${product.id}">
                            <i class="fas fa-eye"></i> Quick View
                        </button>
                    </div>
                </div>
                <div class="product-info">
                    <h3>${product.name}</h3>
                    
                    <div class="product-rating">
                        ${generateStarRating(product.rating)}
                        <span class="rating-count">(${product.reviews})</span>
                    </div>
                    
                    <p class="product-description">${product.description}</p>
                    
                    <div class="product-price">
                        <div>
                            <span class="current-price">$${product.price.toFixed(2)}</span>
                            ${product.originalPrice ? `<span class="original-price">$${product.originalPrice.toFixed(2)}</span>` : ''}
                        </div>
                        ${product.stock ? `<div class="stock-info">In Stock: ${product.stock}</div>` : ''}
                    </div>
                    
                    <div class="product-actions">
                        <button class="add-to-cart" data-id="${product.id}" ${product.stock === 0 ? 'disabled style="opacity: 0.5;"' : ''}>
                            <i class="fas fa-shopping-cart"></i> 
                            ${product.stock === 0 ? 'Out of Stock' : 'Add to Cart'}
                        </button>
                        <button class="add-to-wishlist" data-id="${product.id}">
                            <i class="far fa-heart"></i>
                        </button>
                    </div>
                </div>
            `;
            
            // Add event listeners
            const addToCartBtn = card.querySelector('.add-to-cart');
            if (product.stock > 0) {
                addToCartBtn.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    window.addToCart(productId);
                });
            }
            
            const viewDetailsBtn = card.querySelector('.view-details');
            viewDetailsBtn.addEventListener('click', function(e) {
                e.preventDefault();
                const productId = parseInt(this.getAttribute('data-id'));
                showProductDetails(productId);
            });
            
            const quickViewBtn = card.querySelector('.quick-view');
            if (quickViewBtn) {
                quickViewBtn.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    showQuickView(productId);
                });
            }
            
            const wishlistBtn = card.querySelector('.add-to-wishlist');
            if (wishlistBtn) {
                wishlistBtn.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    window.toggleWishlist(productId);
                });
            }
            
            return card;
        }
        
        // Generate star rating
        function generateStarRating(rating) {
            let stars = '';
            const fullStars = Math.floor(rating);
            const halfStar = rating % 1 >= 0.5;
            const emptyStars = 5 - fullStars - (halfStar ? 1 : 0);
            
            for (let i = 0; i < fullStars; i++) {
                stars += '<i class="fas fa-star"></i>';
            }
            if (halfStar) {
                stars += '<i class="fas fa-star-half-alt"></i>';
            }
            for (let i = 0; i < emptyStars; i++) {
                stars += '<i class="far fa-star"></i>';
            }
            
            return stars;
        }
        
        // Setup category filters
        function setupCategoryFilters() {
            document.querySelectorAll('.category-card').forEach(card => {
                card.addEventListener('click', function(e) {
                    e.preventDefault();
                    const category = this.getAttribute('data-category');
                    
                    // Update active state
                    document.querySelectorAll('.category-card').forEach(c => 
                        c.style.opacity = '1');
                    this.style.opacity = '0.8';
                    
                    // Update current category
                    currentCategory = category;
                    loadAccessories();
                });
            });
        }
        
        // Setup price slider
        function setupPriceSlider() {
            const priceSlider = document.getElementById('priceSlider');
            const priceValue = document.getElementById('priceValue');
            
            if (priceSlider && priceValue) {
                priceSlider.addEventListener('input', function() {
                    maxPrice = parseInt(this.value);
                    priceValue.textContent = `0-${maxPrice}`;
                    loadAccessories();
                });
            }
        }
        
        // Setup stock filter
        function setupStockFilter() {
            const inStockCheckbox = document.getElementById('inStockOnly');
            if (inStockCheckbox) {
                inStockCheckbox.addEventListener('change', function() {
                    inStockOnly = this.checked;
                    loadAccessories();
                });
            }
        }
        
        // Setup sorting
        function setupSorting() {
            const sortSelect = document.getElementById('sortSelect');
            if (sortSelect) {
                sortSelect.addEventListener('change', function() {
                    sortBy = this.value;
                    loadAccessories();
                });
            }
        }
        
        // Setup search
        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            const searchButton = document.getElementById('searchButton');
            
            if (searchInput && searchButton) {
                searchButton.addEventListener('click', performSearch);
                searchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') performSearch();
                });
            }
        }
        
        function performSearch() {
            const query = document.getElementById('searchInput').value.toLowerCase().trim();
            
            // Simple search implementation
            const accessoriesGrid = document.getElementById('accessoriesGrid');
            const productCards = accessoriesGrid.querySelectorAll('.product-card');
            let foundResults = false;
            
            productCards.forEach(card => {
                const title = card.querySelector('h3').textContent.toLowerCase();
                const description = card.querySelector('.product-description').textContent.toLowerCase();
                
                if (title.includes(query) || description.includes(query)) {
                    card.style.display = 'block';
                    foundResults = true;
                } else {
                    card.style.display = 'none';
                }
            });
            
            // Show/hide no results message
            const noResults = document.getElementById('noResults');
            if (!foundResults && query !== '') {
                noResults.innerHTML = `
                    <h3>No results for "${query}"</h3>
                    <p>Try a different search term or browse our categories</p>
                `;
                noResults.style.display = 'block';
            } else if (query === '') {
                noResults.style.display = 'none';
                loadAccessories();
            }
        }
        
        // Update category counts
        function updateCategoryCounts() {
            const categories = {
                'charger': document.getElementById('chargerCount'),
                'audio': document.getElementById('audioCount'),
                'cable': document.getElementById('cableCount'),
                'holder': document.getElementById('holderCount')
            };
            
            // Count products in each category
            const accessoryProducts = window.products.filter(p => p.category === 'accessory');
            
            Object.keys(categories).forEach(category => {
                const count = accessoryProducts.filter(product => 
                    product.name.toLowerCase().includes(category) ||
                    (product.description && product.description.toLowerCase().includes(category))
                ).length;
                
                if (categories[category]) {
                    categories[category].textContent = `${count} product${count !== 1 ? 's' : ''}`;
                }
            });
        }
        
        // Update results count
        function updateResultsCount(count) {
            const resultsCount = document.getElementById('resultsCount');
            if (resultsCount) {
                resultsCount.textContent = count || 0;
            }
        }
        
        // Show bundle offer
        function showBundleOffer() {
            // Create a bundle with accessories
            const bundleProducts = window.products
                .filter(p => p.category === 'accessory')
                .slice(0, 3); // Take first 3 accessories
            
            if (bundleProducts.length < 3) return;
            
            const bundlePrice = bundleProducts.reduce((sum, p) => sum + p.price, 0);
            const discount = 25;
            const finalPrice = bundlePrice * (1 - discount / 100);
            
            const bundleContent = document.getElementById('bundleContent');
            const bundleModal = document.getElementById('bundleModal');
            
            bundleContent.innerHTML = `
                <h2 style="margin-bottom: 20px;">Phone Protection Bundle</h2>
                <p style="color: var(--gray); margin-bottom: 25px;">Get everything you need to protect and enhance your phone in one bundle!</p>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
                    ${bundleProducts.map(product => `
                        <div style="text-align: center;">
                            <img src="${product.image}" alt="${product.name}" style="width: 100px; height: 100px; object-fit: cover; border-radius: 8px; margin-bottom: 10px;">
                            <div style="font-weight: 500;">${product.name}</div>
                            <div style="color: var(--accent);">$${product.price.toFixed(2)}</div>
                        </div>
                    `).join('')}
                </div>
                
                <div style="background: #f8f9fa; padding: 20px; border-radius: var(--radius); margin-bottom: 25px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>Original Price:</span>
                        <span style="text-decoration: line-through; color: var(--gray);">$${bundlePrice.toFixed(2)}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>Discount (${discount}%):</span>
                        <span style="color: #4CAF50;">-$${(bundlePrice - finalPrice).toFixed(2)}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 1.2rem; font-weight: bold;">
                        <span>Bundle Price:</span>
                        <span style="color: var(--accent);">$${finalPrice.toFixed(2)}</span>
                    </div>
                </div>
                
                <button class="btn" style="width: 100%; padding: 15px; font-size: 1.1rem;" onclick="addBundleToCart()">
                    <i class="fas fa-gift"></i> Add Bundle to Cart (Save $${(bundlePrice - finalPrice).toFixed(2)})
                </button>
            `;
            
            bundleModal.classList.add('active');
            
            // Close button
            const closeBundle = document.getElementById('closeBundle');
            if (closeBundle) {
                closeBundle.addEventListener('click', () => {
                    bundleModal.classList.remove('active');
                });
            }
            
            // Close on click outside
            bundleModal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
        }
        
        // Add bundle to cart
        function addBundleToCart() {
            const bundleProducts = window.products
                .filter(p => p.category === 'accessory')
                .slice(0, 3);
            
            bundleProducts.forEach(product => {
                window.addToCart(product.id);
            });
            
            alert('Bundle added to cart! You saved 25% on these accessories.');
            
            // Close modal
            document.getElementById('bundleModal').classList.remove('active');
        }
        
        // Show product details
        function showProductDetails(productId) {
            const product = window.products.find(p => p.id === productId);
            if (!product) return;
            
            const modalContent = document.getElementById('modalContent');
            const modal = document.getElementById('productModal');
            
            if (!modalContent || !modal) return;
            
            modalContent.innerHTML = `
                <div class="modal-image">
                    <img src="${product.image}" alt="${product.name}">
                </div>
                <div class="modal-info">
                    <h2>${product.name}</h2>
                    <div class="product-rating-large">
                        ${generateStarRating(product.rating)}
                        <span class="rating-count">${product.reviews} reviews</span>
                    </div>
                    <div class="modal-price">
                        $${product.price.toFixed(2)}
                        ${product.originalPrice ? `<span class="original-price">$${product.originalPrice.toFixed(2)}</span>` : ''}
                        ${product.discount ? `<span class="discount-badge">${product.discount}% OFF</span>` : ''}
                    </div>
                    <div class="stock-status">
                        ${product.stock > 0 ? 
                            `<i class="fas fa-check-circle" style="color: #4CAF50;"></i>
                             <span>${product.stock > 10 ? 'In Stock' : 'Low Stock'} (${product.stock} available)</span>` :
                            `<i class="fas fa-times-circle" style="color: #f44336;"></i>
                             <span>Out of Stock</span>`
                        }
                    </div>
                    <p class="modal-description">${product.description}</p>
                    <div class="modal-actions">
                        <button class="btn btn-primary" onclick="window.addToCart(${product.id})" ${product.stock === 0 ? 'disabled' : ''}>
                            <i class="fas fa-shopping-cart"></i> ${product.stock === 0 ? 'Out of Stock' : 'Add to Cart'}
                        </button>
                        <button class="btn btn-secondary" onclick="window.toggleWishlist(${product.id})">
                            <i class="far fa-heart"></i> Add to Wishlist
                        </button>
                    </div>
                </div>
            `;
            
            modal.classList.add('active');
            
            // Close button
            const closeModal = document.getElementById('closeModal');
            if (closeModal) {
                closeModal.addEventListener('click', () => {
                    modal.classList.remove('active');
                });
            }
            
            // Close on click outside
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
        }
        
        // Show quick view
        function showQuickView(productId) {
            const product = window.products.find(p => p.id === productId);
            if (!product) return;
            
            // Simple quick view alert
            alert(`Quick View: ${product.name}\nPrice: $${product.price.toFixed(2)}\nRating: ${product.rating}/5\nStock: ${product.stock > 0 ? product.stock + ' available' : 'Out of stock'}\n\nClick "View Details" for more information.`);
        }
    </script>
</body>
    </html>
