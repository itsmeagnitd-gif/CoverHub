<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart - Coverly</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <style>
        /* Additional CSS for cart page enhancements */
        .cart-progress {
            background: white;
            padding: 20px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }
        
        .progress-bar {
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--accent);
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .coupon-section {
            background: white;
            padding: 20px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            display: none;
        }
        
        .coupon-section.active {
            display: block;
        }
        
        .coupon-input {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .coupon-input input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: var(--radius-sm);
            font-size: 1rem;
        }
        
        .coupon-input input:focus {
            outline: none;
            border-color: var(--accent);
        }
        
        .gift-wrapping {
            background: white;
            padding: 20px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            display: none;
        }
        
        .gift-wrapping.active {
            display: block;
        }
        
        .gift-option {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 15px;
        }
        
        .gift-option input[type="checkbox"] {
            width: 20px;
            height: 20px;
        }
        
        .gift-note {
            margin-top: 15px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: var(--radius-sm);
            font-size: 0.9rem;
            color: var(--gray);
            display: none;
        }
        
        .gift-note.active {
            display: block;
        }
        
        .loyalty-points {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--accent) 100%);
            color: white;
            padding: 20px;
            border-radius: var(--radius);
            margin-bottom: 30px;
            display: none;
        }
        
        .loyalty-points.active {
            display: block;
        }
        
        .points-balance {
            font-size: 2rem;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .use-points {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
        }
        
        .use-points input {
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            width: 100px;
        }
        
        .suggested-products {
            margin-top: 40px;
        }
        
        .product-bundle {
            background: white;
            padding: 20px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }
        
        .bundle-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .bundle-products {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .bundle-product-item {
            text-align: center;
            padding: 10px;
            border: 1px solid #eee;
            border-radius: var(--radius-sm);
            transition: var(--transition);
        }
        
        .bundle-product-item:hover {
            border-color: var(--accent);
        }
        
        .bundle-product-item img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        
        .stock-warning {
            color: var(--danger);
            font-size: 0.85rem;
            margin-top: 5px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .cart-item-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .save-for-later {
            background: #f8f9fa;
            border: 1px solid #ddd;
            color: var(--dark);
            padding: 8px 15px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: var(--transition);
        }
        
        .save-for-later:hover {
            background: #e9ecef;
            border-color: var(--accent);
            color: var(--accent);
        }
        
        .gift-icon {
            color: var(--primary);
            margin-left: 10px;
        }
        
        #couponMessage, #pointsMessage {
            margin-top: 10px;
            padding: 10px;
            border-radius: var(--radius-sm);
            font-size: 0.9rem;
        }
        
        #couponMessage.success, #pointsMessage.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        #couponMessage.error, #pointsMessage.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .empty-cart-illustration {
            width: 200px;
            height: 200px;
            margin: 0 auto 30px;
            background: var(--secondary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            color: var(--accent);
        }
        
        @media (max-width: 768px) {
            .cart-item {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .cart-item-image {
                margin: 0 auto;
            }
            
            .cart-item-actions {
                justify-content: center;
            }
            
            .bundle-header {
                flex-direction: column;
            }
            
            .coupon-input, .use-points {
                flex-direction: column;
            }
            
            .coupon-input input, .use-points input {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <nav class="navbar">
                <a href="index.html" class="logo">
                    <div class="logo-icon">C</div>
                    <span>Coverly</span>
                </a>
                
                <div class="nav-links" id="navLinks">
                    <a href="index.html">Home</a>
                    <a href="cover.html">Covers</a>
                    <a href="accessories.html">Accessories</a>
                    <a href="cart.html" class="active">Cart</a>
                    <a href="wishlist.html">Wishlist</a>
                    <a href="admin.html" id="adminNavLink" style="display: none;">Admin</a>
                </div>
                
                <div class="nav-actions">
                    <div class="search-bar">
                        <input type="text" id="searchInput" placeholder="Search products...">
                        <button id="searchButton"><i class="fas fa-search"></i></button>
                    </div>
                    
                    <!-- Wishlist Icon -->
                    <a href="wishlist.html" class="wishlist-icon" style="position: relative; margin-right: 15px; color: var(--dark); text-decoration: none;">
                        <i class="far fa-heart"></i>
                        <span class="wishlist-count" style="position: absolute; top: -8px; right: -8px; background-color: var(--primary); color: white; font-size: 0.8rem; width: 18px; height: 18px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold;">0</span>
                    </a>
                    
                    <a href="cart.html" class="cart-icon">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count">0</span>
                    </a>
                    
                    <!-- Admin Link -->
                    <a href="admin.html" class="admin-link" id="adminLink" style="display: none; margin-left: 15px; color: var(--accent);">
                        <i class="fas fa-cog"></i>
                    </a>
                    
                    <div class="mobile-toggle" id="mobileToggle">
                        <i class="fas fa-bars"></i>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- Cart Page Content -->
    <section class="container">
        <div class="cart-container">
            <h1 class="cart-title">Your Shopping Cart</h1>
            
            <!-- Free Shipping Progress -->
            <div class="cart-progress">
                <h3 style="margin-bottom: 10px;">Free Shipping Progress</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="shippingProgress" style="width: 0%"></div>
                </div>
                <div class="progress-text">
                    <span id="progressText">Add $50.00 more for free shipping!</span>
                    <span id="progressAmount">$0.00 / $50.00</span>
                </div>
            </div>
            
            <!-- Main Cart Content -->
            <div id="cartContent">
                <!-- Cart items will be loaded by JavaScript -->
            </div>
            
            <!-- Coupon Section -->
            <div class="coupon-section" id="couponSection">
                <h3>Have a coupon code?</h3>
                <div class="coupon-input">
                    <input type="text" id="couponCode" placeholder="Enter coupon code">
                    <button class="btn" id="applyCouponBtn">Apply</button>
                </div>
                <div id="couponMessage"></div>
            </div>
            
            <!-- Gift Wrapping -->
            <div class="gift-wrapping" id="giftWrappingSection">
                <h3>Gift Options</h3>
                <div class="gift-option">
                    <input type="checkbox" id="giftWrapCheckbox">
                    <label for="giftWrapCheckbox" style="flex: 1;">
                        <strong>Add Gift Wrapping</strong>
                        <div style="color: var(--gray); font-size: 0.9rem; margin-top: 5px;">
                            Beautiful gift wrapping with premium packaging. (+$4.99)
                        </div>
                    </label>
                </div>
                <div class="gift-note" id="giftNote">
                    <textarea placeholder="Add a gift message (optional)" rows="3" style="width: 100%; border: none; background: transparent; resize: vertical; font-family: inherit; padding: 10px;"></textarea>
                </div>
            </div>
            
            <!-- Loyalty Points -->
            <div class="loyalty-points" id="loyaltySection">
                <h3 style="color: white; margin-top: 0;">Your Loyalty Points</h3>
                <div class="points-balance" id="pointsBalance">0</div>
                <p style="opacity: 0.9; margin-bottom: 15px;">Earn 10 points for every $1 spent</p>
                <div class="use-points">
                    <input type="number" id="usePoints" min="0" placeholder="Points to use">
                    <button class="btn" id="applyPointsBtn">Use Points</button>
                </div>
                <div id="pointsMessage"></div>
            </div>
            
            <!-- Suggested Bundles -->
            <div class="suggested-products" id="suggestedBundles">
                <!-- Suggested bundles will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-about">
                    <div class="footer-logo">Coverly<span>.</span></div>
                    <p>Coverly is your one-stop shop for premium phone accessories. We offer high-quality products that combine style, protection, and functionality for your mobile devices.</p>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-pinterest"></i></a>
                    </div>
                </div>
                
                <div class="footer-links">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="cover.html">Phone Covers</a></li>
                        <li><a href="accessories.html">Accessories</a></li>
                        <li><a href="cart.html">Shopping Cart</a></li>
                        <li><a href="wishlist.html">My Wishlist</a></li>
                    </ul>
                </div>
                
                <div class="footer-contact">
                    <h3>Contact Us</h3>
                    <p><i class="fas fa-map-marker-alt"></i> 123 Tech Street, San Francisco, CA</p>
                    <p><i class="fas fa-phone"></i> +1 (555) 123-4567</p>
                    <p><i class="fas fa-envelope"></i> support@coverly.com</p>
                    <p><i class="fas fa-clock"></i> Mon-Sat: 9AM - 8PM</p>
                </div>
                
                <div class="footer-info">
                    <h3>Customer Service</h3>
                    <ul>
                        <li><a href="#">Shipping Policy</a></li>
                        <li><a href="#">Return Policy</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms & Conditions</a></li>
                        <li><a href="#">FAQ</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2023 Coverly. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- WhatsApp Button -->
    <a href="https://wa.me/15551234567" class="whatsapp-btn" target="_blank" aria-label="Chat on WhatsApp">
        <i class="fab fa-whatsapp"></i>
    </a>

    <!-- JavaScript Files -->
    <script src="product.js"></script>
    <script src="cart.js"></script>
    
    <!-- Cart Page Specific JavaScript -->
    <script>
        // Mobile Navigation Toggle
        document.addEventListener('DOMContentLoaded', function() {
            const mobileToggle = document.getElementById('mobileToggle');
            const navLinks = document.getElementById('navLinks');
            
            if (mobileToggle && navLinks) {
                mobileToggle.addEventListener('click', () => {
                    navLinks.classList.toggle('active');
                });
            }
            
            // Check admin login status
            const isAdminLoggedIn = localStorage.getItem('adminLoggedIn') === 'true';
            const adminLink = document.getElementById('adminLink');
            const adminNavLink = document.getElementById('adminNavLink');
            
            if (isAdminLoggedIn && adminLink && adminNavLink) {
                adminLink.style.display = 'block';
                adminNavLink.style.display = 'block';
            }
            
            // Load cart when page loads
            if (window.loadCart) {
                window.loadCart();
            }
            
            // Load wishlist count
            if (window.updateWishlistCount) {
                window.updateWishlistCount();
            }
            
            // Setup coupon functionality
            const applyCouponBtn = document.getElementById('applyCouponBtn');
            if (applyCouponBtn) {
                applyCouponBtn.addEventListener('click', applyCoupon);
            }
            
            // Setup gift wrapping
            const giftWrapCheckbox = document.getElementById('giftWrapCheckbox');
            if (giftWrapCheckbox) {
                giftWrapCheckbox.addEventListener('change', function() {
                    const giftNote = document.getElementById('giftNote');
                    if (this.checked) {
                        giftNote.classList.add('active');
                    } else {
                        giftNote.classList.remove('active');
                    }
                    
                    // Update cart with gift wrapping
                    const cart = JSON.parse(localStorage.getItem('coverlyCart')) || [];
                    cart.forEach(item => {
                        item.giftWrapping = this.checked;
                    });
                    localStorage.setItem('coverlyCart', JSON.stringify(cart));
                    
                    // Reload cart to update totals
                    if (window.loadCart) {
                        window.loadCart();
                    }
                });
            }
            
            // Setup loyalty points
            const applyPointsBtn = document.getElementById('applyPointsBtn');
            if (applyPointsBtn) {
                applyPointsBtn.addEventListener('click', applyLoyaltyPoints);
            }
            
            // Load loyalty points
            updateLoyaltyPoints();
            
            // Load suggested bundles
            loadSuggestedBundles();
            
            // Setup search functionality
            const searchInput = document.getElementById('searchInput');
            const searchButton = document.getElementById('searchButton');
            
            if (searchInput && searchButton) {
                searchButton.addEventListener('click', function() {
                    const query = searchInput.value.toLowerCase().trim();
                    if (query) {
                        alert(`Searching for: ${query}\nThis would search products in a real implementation.`);
                    }
                });
                
                searchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        searchButton.click();
                    }
                });
            }
        });
        
        // Apply coupon
        function applyCoupon() {
            const couponCode = document.getElementById('couponCode').value.trim();
            const couponMessage = document.getElementById('couponMessage');
            
            if (!couponCode) {
                couponMessage.innerHTML = '<span style="color: #f44336;">Please enter a coupon code</span>';
                couponMessage.className = 'error';
                return;
            }
            
            // Simulated coupon codes
            const validCoupons = {
                'COVERLY10': { type: 'percent', value: 10 },
                'SAVE20': { type: 'fixed', value: 20 },
                'WELCOME15': { type: 'percent', value: 15 },
                'FREESHIP': { type: 'shipping', value: 'free' }
            };
            
            const coupon = validCoupons[couponCode.toUpperCase()];
            
            if (coupon) {
                localStorage.setItem('activeCoupon', JSON.stringify({
                    code: couponCode.toUpperCase(),
                    type: coupon.type,
                    value: coupon.value
                }));
                
                let message = `Coupon "${couponCode.toUpperCase()}" applied successfully! `;
                if (coupon.type === 'percent') {
                    message += `${coupon.value}% off your order.`;
                } else if (coupon.type === 'fixed') {
                    message += `$${coupon.value} off your order.`;
                } else {
                    message += 'Free shipping activated!';
                }
                
                couponMessage.innerHTML = `<span style="color: #4CAF50;">${message}</span>`;
                couponMessage.className = 'success';
                
                // Reload cart to apply discount
                if (window.loadCart) {
                    window.loadCart();
                }
            } else {
                couponMessage.innerHTML = '<span style="color: #f44336;">Invalid coupon code. Try COVERLY10, SAVE20, WELCOME15, or FREESHIP</span>';
                couponMessage.className = 'error';
            }
        }
        
        // Apply loyalty points
        function applyLoyaltyPoints() {
            const pointsInput = document.getElementById('usePoints');
            const pointsToUse = parseInt(pointsInput.value);
            const pointsMessage = document.getElementById('pointsMessage');
            
            if (!pointsToUse || pointsToUse <= 0) {
                pointsMessage.innerHTML = '<span style="color: #f44336;">Please enter valid points</span>';
                pointsMessage.className = 'error';
                return;
            }
            
            // Get user's available points
            const userPoints = parseInt(document.getElementById('pointsBalance').textContent.replace(/,/g, ''));
            
            if (pointsToUse > userPoints) {
                pointsMessage.innerHTML = `<span style="color: #f44336;">You only have ${userPoints.toLocaleString()} points available</span>`;
                pointsMessage.className = 'error';
                return;
            }
            
            const loyaltySettings = JSON.parse(localStorage.getItem('coverlyLoyaltySettings') || '{}');
            const pointsValue = loyaltySettings.pointsValue || 1.00;
            const discountAmount = (pointsToUse / 100) * pointsValue;
            
            localStorage.setItem('usedLoyaltyPoints', JSON.stringify({
                points: pointsToUse,
                discount: discountAmount
            }));
            
            pointsMessage.innerHTML = `<span style="color: #4CAF50;">${pointsToUse.toLocaleString()} points applied! You get $${discountAmount.toFixed(2)} off.</span>`;
            pointsMessage.className = 'success';
            
            // Reload cart to apply discount
            if (window.loadCart) {
                window.loadCart();
            }
        }
        
        // Update loyalty points display
        function updateLoyaltyPoints() {
            // Simulated loyalty points - in real app, get from user account
            const userPoints = 1500;
            const pointsBalance = document.getElementById('pointsBalance');
            const loyaltySection = document.getElementById('loyaltySection');
            
            if (pointsBalance) {
                pointsBalance.textContent = userPoints.toLocaleString();
            }
            
            if (loyaltySection && userPoints > 0) {
                loyaltySection.classList.add('active');
            }
        }
        
        // Load suggested bundles
        function loadSuggestedBundles() {
            const bundles = JSON.parse(localStorage.getItem('coverlyBundles') || '[]');
            const suggestedBundles = document.getElementById('suggestedBundles');
            
            if (!suggestedBundles || bundles.length === 0) return;
            
            // Get current cart items
            const cart = JSON.parse(localStorage.getItem('coverlyCart')) || [];
            const cartProductIds = cart.map(item => item.id);
            
            // Find bundles that include products from cart
            const relevantBundles = bundles.filter(bundle => {
                return bundle.products.some(productId => cartProductIds.includes(productId));
            }).slice(0, 2); // Show max 2 bundles
            
            if (relevantBundles.length === 0) return;
            
            let bundlesHTML = '<h2 class="section-title">Complete Your Set</h2>';
            bundlesHTML += '<p class="section-subtitle">Add these bundles to save even more!</p>';
            
            relevantBundles.forEach(bundle => {
                const bundleProducts = bundle.products.map(id => 
                    window.products.find(p => p.id === id)
                ).filter(p => p);
                
                bundlesHTML += `
                    <div class="product-bundle">
                        <div class="bundle-header">
                            <div>
                                <h3 style="margin: 0 0 10px 0;">${bundle.name}</h3>
                                <p style="color: var(--gray); margin: 0;">${bundle.description || 'Special bundle offer!'}</p>
                            </div>
                            <div style="text-align: right;">
                                <div style="text-decoration: line-through; color: var(--gray); font-size: 1.1rem;">$${bundle.originalPrice.toFixed(2)}</div>
                                <div style="font-size: 1.8rem; color: var(--accent); font-weight: bold; margin: 5px 0;">$${bundle.price.toFixed(2)}</div>
                                <div style="color: #4CAF50; font-size: 0.9rem; font-weight: bold;">Save ${bundle.discount}% ($${(bundle.originalPrice - bundle.price).toFixed(2)})</div>
                            </div>
                        </div>
                        <div class="bundle-products">
                            ${bundleProducts.map(product => `
                                <div class="bundle-product-item">
                                    <img src="${product.image}" alt="${product.name}">
                                    <div style="font-size: 0.85rem; font-weight: 500; margin-bottom: 5px;">${product.name}</div>
                                    <div style="color: var(--accent); font-size: 0.9rem; font-weight: bold;">$${product.price.toFixed(2)}</div>
                                </div>
                            `).join('')}
                        </div>
                        <button class="btn btn-primary" onclick="addBundleToCart(${bundle.id})" style="margin-top: 20px; width: 100%;">
                            <i class="fas fa-plus"></i> Add Bundle to Cart
                        </button>
                    </div>
                `;
            });
            
            suggestedBundles.innerHTML = bundlesHTML;
        }
        
        // Add bundle to cart
        function addBundleToCart(bundleId) {
            const bundles = JSON.parse(localStorage.getItem('coverlyBundles') || '[]');
            const bundle = bundles.find(b => b.id === bundleId);
            
            if (bundle && window.addToCart) {
                // Add each product in the bundle to cart
                bundle.products.forEach(productId => {
                    window.addToCart(productId);
                });
                
                // Show success message
                if (window.showNotification) {
                    window.showNotification(`Bundle "${bundle.name}" added to cart! You saved $${(bundle.originalPrice - bundle.price).toFixed(2)}`);
                } else {
                    alert(`Bundle "${bundle.name}" added to cart! You saved $${(bundle.originalPrice - bundle.price).toFixed(2)}`);
                }
                
                // Reload cart
                if (window.loadCart) {
                    window.loadCart();
                }
                
                // Reload suggested bundles
                loadSuggestedBundles();
            }
        }
        
        // Function to show/hide cart sections based on cart content
        function updateCartSectionsVisibility() {
            const cart = JSON.parse(localStorage.getItem('coverlyCart')) || [];
            const couponSection = document.getElementById('couponSection');
            const giftWrappingSection = document.getElementById('giftWrappingSection');
            
            if (cart.length > 0) {
                if (couponSection) couponSection.classList.add('active');
                if (giftWrappingSection) giftWrappingSection.classList.add('active');
            } else {
                if (couponSection) couponSection.classList.remove('active');
                if (giftWrappingSection) giftWrappingSection.classList.remove('active');
            }
        }
        
        // Override window.loadCart to include our custom logic
        const originalLoadCart = window.loadCart;
        window.loadCart = function() {
            if (originalLoadCart) {
                originalLoadCart();
            }
            updateCartSectionsVisibility();
            updateShippingProgress();
        };
        
        // Update free shipping progress
        function updateShippingProgress() {
            const progressFill = document.getElementById('shippingProgress');
            const progressText = document.getElementById('progressText');
            const progressAmount = document.getElementById('progressAmount');
            
            if (!progressFill || !progressText || !progressAmount) return;
            
            const cart = JSON.parse(localStorage.getItem('coverlyCart')) || [];
            const subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            const freeShippingThreshold = 50;
            const progress = Math.min((subtotal / freeShippingThreshold) * 100, 100);
            
            progressFill.style.width = `${progress}%`;
            progressAmount.textContent = `$${subtotal.toFixed(2)} / $${freeShippingThreshold.toFixed(2)}`;
            
            if (subtotal >= freeShippingThreshold) {
                progressText.textContent = 'ðŸŽ‰ Congratulations! You get free shipping!';
                progressText.style.color = '#4CAF50';
            } else {
                const amountNeeded = (freeShippingThreshold - subtotal).toFixed(2);
                progressText.textContent = `Add $${amountNeeded} more for free shipping!`;
                progressText.style.color = '';
            }
        }
        
        // Initialize shipping progress on page load
        window.addEventListener('load', updateShippingProgress);
    </script>
</body>
    </html>
